// 1. Улучшенная функция проверки слотов
есть*неудобные*слоты(ПОСТАВКИ):
вернуть любая ПОСТАВКА в ПОСТАВКИ
где ПОСТАВКА.текущий*слот ≠ УДОБНЫЙ*СЛОТ*ИЗ*БД

// 2. Объединение запросов и обработка ошибок
получить*поставки():
ответ = ЗАПРОС(POST /v3/supply-order/list)
если ответ.успешно:
детали = ЗАПРОС(POST /v1/supply-order/get, ответ.id*поставок)
отобразить*поставки(детали)
вернуть детали
иначе:
логировать*ошибку(ответ)
вернуть ПУСТОЙ_СПИСОК

// 3. Основная логика с улучшенной структурой
основная*функция():
цикл каждые 10 минут:
поставки = получить*поставки()
если есть*неудобные*слоты(поставки):
обработать*неудобные*слоты(поставки)

// 4. Упрощенная обработка слотов
обработать*неудобные*слоты(ПОСТАВКИ):
попыток = 0
пока попыток < 10 и есть*неудобные*слоты(ПОСТАВКИ):
обновления = []

        для поставка в ПОСТАВКИ где поставка.слот ≠ УДОБНЫЙ_СЛОТ_ИЗ_БД:
            слоты = ЗАПРОС(POST /v1/supply-order-timeslot/get, поставка.id)
            удобный_слот = найти_первый_удобный(слоты)
            если удобный_слот ≠ НИЧЕГО:
                обновления.добавить({поставка.id, удобный_слот})

        если обновления.не_пусто():
            выполнить_обновления(обновления)
            уведомить_пользователя()

        ждать(1 минута)
        ПОСТАВКИ = получить_поставки()  // Обновляем данные
        попыток += 1

// Вспомогательные функции
найти*первый*удобный(СЛОТЫ):
вернуть первый слот в СЛОТЫ где слот = УДОБНЫЙ*СЛОТ*ИЗ_БД

выполнить_обновления(ОБНОВЛЕНИЯ):
для обновление в ОБНОВЛЕНИЯ:
ЗАПРОС(POST /v1/supply-order/timeslot/update, обновление)
